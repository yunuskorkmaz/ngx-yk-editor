!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("monaco-editor"),require("node-emoji"),require("marked"),require("highlight.js"),require("@angular/platform-browser"),require("@angular/common"),require("angular-resize-event")):"function"==typeof define&&define.amd?define("yk-editor",["exports","@angular/core","monaco-editor","node-emoji","marked","highlight.js","@angular/platform-browser","@angular/common","angular-resize-event"],t):t(e["yk-editor"]={},e.ng.core,e.monacoEditor,e.emoji,e.marked,e.hljs,e.ng.platformBrowser,e.ng.common,e.angularResizeEvent)}(this,function(e,t,u,i,o,n,r,s,a){"use strict";i=i&&i.hasOwnProperty("default")?i["default"]:i,o=o&&o.hasOwnProperty("default")?o["default"]:o,n=n&&n.hasOwnProperty("default")?n["default"]:n;var l=function(){function e(e){this.el=e,this.contentChange=new t.EventEmitter,this._content="",this.displayMode="split",this.isFullScreen=!1,this.theme=!0,this.config={language:"markdown",minimap:{enabled:!1},lineNumbers:"off",theme:this.theme?"vs":"vs-dark",scrollBeyondLastLine:!1,wordWrap:"on",glyphMargin:!1}}return Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e,this.contentChange.emit(e)},enumerable:!0,configurable:!0}),e.prototype.changeTheme=function(){this.theme=!this.theme,1==this.theme?u.editor.setTheme("vs"):u.editor.setTheme("vs-dark")},e.prototype.changeLayout=function(e){if(this.displayMode!=e||"fullscreen"==e){switch(this.displayMode=e){case"edit":this.previewContainer.nativeElement.setAttribute("style","display : none"),this.editorContainer.nativeElement.setAttribute("style","min-width : 100%;max-width : 100%");break;case"preview":this.editorContainer.nativeElement.setAttribute("style","display : none"),this.previewContainer.nativeElement.setAttribute("style","min-width : 100%;max-width : 100%");break;case"split":this.previewContainer.nativeElement.setAttribute("style",""),this.editorContainer.nativeElement.setAttribute("style",""),this.resizeLayout();break;case"fullscreen":this.isFullScreen=!this.isFullScreen,1==this.isFullScreen?this.mainContainer.nativeElement.setAttribute("style","position: fixed;top: 0px;left: 0;bottom: 0;right: 0;width: 100%;height: 100%;"):this.mainContainer.nativeElement.setAttribute("style",""),this.resizeLayout()}this.baseEditor.layout()}},e.prototype.ngOnInit=function(){var t=this;this.baseEditor=u.editor.create(this.host.nativeElement,this.config),this.baseEditor.setModel(u.editor.createModel(this.content,"markdown")),this.baseEditor.onDidChangeModelContent(function(e){t.content=t.baseEditor.getValue()});var n=[];for(var e in i.emoji)n.push({label:e+" "+i.emoji[e],kind:u.languages.CompletionItemKind.Function,insertText:e+":"});u.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:function(e,t){return":"===e.getValueInRange({startLineNumber:t.lineNumber,startColumn:t.column-1,endLineNumber:t.lineNumber,endColumn:t.column})?n:[]},triggerCharacters:[":"]}),u.languages.setLanguageConfiguration("markdown",{onEnterRules:[{beforeText:/^[-]\s(.*)/,action:{appendText:"- ",indentAction:u.languages.IndentAction.None}}]}),u.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:function(){return[{label:"h1",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"# ${1:text}"}},{label:"h2",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"## ${1:text}"}},{label:"h3",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"### ${1:text}"}},{label:"h4",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"#### ${1:text}"}},{label:"h5",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"##### ${1:text}"}},{label:"h6",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"###### ${1:text}"}},{label:"code",kind:u.languages.CompletionItemKind.Snippet,insertText:{value:["```","${1:code}","```"].join("\n")},documentation:"If-Else Statement"},{label:"link",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"[${1:linkText}](${2:url})"}},{label:"image",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"![${1:altText}](${2:url})"}},{label:"linkreferance",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"[${1:name}]: ${2:link}"}},{label:"list",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"\n - ${1:text}"}},{label:"todo un check",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"\n - [ ] ${2:text}"}},{label:"todo check",kind:u.languages.CompletionItemKind.Keyword,insertText:{value:"\n - [x] ${2:text}"}}]}}),this.baseEditor.updateOptions({glyphMargin:!1})},e.prototype.charRepeatBasedInsertText=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var i=e.trim().length,o=this.baseEditor.getSelection(),r=this.baseEditor.getModel().getValueInRange(o);r.trim();var s=new u.Selection(o.selectionStartLineNumber,o.selectionStartColumn-i,o.positionLineNumber,o.positionColumn-r.length),a=new u.Selection(o.selectionStartLineNumber,o.positionColumn,o.positionLineNumber,o.positionColumn+i),l=this.baseEditor.getModel().getValueInRange(s),d=this.baseEditor.getModel().getValueInRange(a);l==e&&d==e?(this.baseEditor.executeEdits("",[{range:a,text:""}]),this.baseEditor.executeEdits("",[{range:s,text:""}])):(r=(1==t?"\n":"")+e+(1==t?"\n":"")+r+(1==t?"\n":"")+e,this.baseEditor.executeEdits("",[{range:o,text:r}]),this.baseEditor.setSelection({startColumn:o.startColumn+(0==n?i:0),endColumn:o.endColumn+(0==n?i:0),startLineNumber:o.startLineNumber+n,endLineNumber:o.endLineNumber+n})),this.baseEditor.focus()},e.prototype.linkBasedInsertText=function(e){var t="image"==e?4:3,n="image"==e?"!":"",i=this.baseEditor.getSelection(),o=n+"["+this.baseEditor.getModel().getValueInRange(i)+"]()";this.baseEditor.executeEdits("",[{range:i,text:o}]),this.baseEditor.setPosition({lineNumber:i.endLineNumber,column:i.endColumn+t}),this.baseEditor.focus()},e.prototype.listBasedInsertText=function(e,t){void 0===t&&(t=!1);var n="todo"==e?1==t?"[x]":"[ ]":"",i=this.baseEditor.getSelection(),o="\n - "+n+" "+this.baseEditor.getModel().getValueInRange(i)+" ";this.baseEditor.executeEdits("",[{range:i,text:o}]),this.baseEditor.setPosition({lineNumber:i.endLineNumber+1,column:"todo"==e?8:4}),this.baseEditor.focus()},e.prototype.insertContent=function(e){switch(e){case"bold":this.charRepeatBasedInsertText("**");break;case"italic":this.charRepeatBasedInsertText("*");break;case"strikethrough":this.charRepeatBasedInsertText("~~");break;case"link":this.linkBasedInsertText("link");break;case"image":this.linkBasedInsertText("image");break;case"code":this.charRepeatBasedInsertText("```",!0,1);break;case"inline-code":this.charRepeatBasedInsertText("`");break;case"undo":this.baseEditor.trigger("","undo","");break;case"redo":this.baseEditor.trigger("","redo","");break;case"list":this.listBasedInsertText("link");break;case"todo-x":this.listBasedInsertText("todo",!0);break;case"todo-o":this.listBasedInsertText("todo",!1)}},e.prototype.onResized=function(e){this.baseEditor.layout(),this.resizeLayout()},e.prototype.resizeLayout=function(){var e=this.resizeContainer.nativeElement.offsetWidth;this.editorContainer.nativeElement.style.width=e/2+"px",this.previewContainer.nativeElement.style.width=e/2+"px"},e.prototype.ngAfterViewInit=function(){this.resizeLayout()},e.decorators=[{type:t.Component,args:[{selector:"yk-editor",template:'<div (resized)="onResized($event)" class="main-container" #mainContainer>\n  <div class="toolbar">\n    <div>\n      <button (click)="insertContent(\'undo\')">\n        <i class="yi undo"></i>\n      </button>\n      <button (click)="insertContent(\'redo\')">\n        <i class="yi repeat"></i>\n      </button>\n      <span class="sparator"></span>\n      <button (click)="insertContent(\'bold\')">\n        <i class="yi bold"></i>\n      </button>\n      <button (click)="insertContent(\'italic\')">\n        <i class="yi italic"></i>\n      </button>\n\n      <button (click)="insertContent(\'strikethrough\')">\n        <i class="yi strikethrough"></i>\n      </button>\n      <span class="sparator"></span>\n      <button (click)="insertContent(\'link\')">\n        <i class="yi link"></i>\n      </button>\n      <button (click)="insertContent(\'image\')">\n        <i class="yi picture-o"></i>\n      </button>\n      <span class="sparator"></span>\n      <button (click)="insertContent(\'code\')">\n        <i class="yi code"></i>\n      </button>\n      <button (click)="insertContent(\'inline-code\')">\n        <i class="yi terminal"></i>\n      </button>\n      <button (click)="insertContent(\'list\')">\n        <i class="yi list-ul"></i>\n      </button>\n      <button (click)="insertContent(\'todo-x\')">\n        <i class="yi check-square-o"></i>\n      </button>\n      <button (click)="insertContent(\'todo-o\')">\n        <i class="yi square-o"></i>\n      </button>\n      <span class="sparator"></span>\n      <button (click)="changeTheme()">\n        <i class="yi" [ngClass]="{\'moon-o\': theme, \'sun-o\': !theme}"></i>\n      </button>\n      <button (click)="changeLayout(\'fullscreen\')">\n        <i class="yi arrows-alt"></i>\n      </button>\n    </div>\n    <div class="btn-group">\n      <button (click)="changeLayout(\'edit\')" [ngClass]="{\'active\': displayMode == \'edit\'}">\n        <i class="yi pencil-square-o"></i>\n      </button>\n      <button (click)="changeLayout(\'split\')" [ngClass]=" {\'active\': displayMode==\'split\' }">\n        <i class="yi columns"></i>\n      </button>\n      <button (click)="changeLayout(\'preview\')" [ngClass]="{\'active\': displayMode == \'preview\'}">\n        <i class="yi eye"></i>\n      </button>\n    </div>\n\n  </div>\n  <div (resized)="onResized($event)" #resizeContainer class="editor-container">\n    <div (resized)="onResized($event)" class="editor" #editorContainer>\n      <div class="monaco-editor" #editorhost></div>\n    </div>\n    <div (resized)="onResized($event)" class="preview" #previewContainer [ngClass]="{\'light\': theme, \'dark\':!theme}">\n      <div markdown [markdowntext]="content" class="rendered-markdown"></div>\n    </div>\n  </div>\n</div>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={content:[{type:t.Input}],contentChange:[{type:t.Output}],host:[{type:t.ViewChild,args:["editorhost"]}],editorContainer:[{type:t.ViewChild,args:["editorContainer"]}],previewContainer:[{type:t.ViewChild,args:["previewContainer"]}],mainContainer:[{type:t.ViewChild,args:["mainContainer"]}],resizeContainer:[{type:t.ViewChild,args:["resizeContainer"]}]},e}(),d=function(){function e(e,t,n){this.el=e,this.sanitize=t,this.render2=n,this.renderer=new o.Renderer,this.markedRenderer(),this.renderMarkdown("")}return Object.defineProperty(e.prototype,"markdowntext",{set:function(e){null!=e&&e!=this._content&&(this._content=e,this.renderMarkdown(this._content))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.markedContent},enumerable:!0,configurable:!0}),e.prototype.renderMarkdown=function(e){e=e.replace(/(:.*:)/g,function(e){return i.emojify(e)}),this.markedContent=o(e),this.markedContent=this.sanitize.bypassSecurityTrustHtml(this.markedContent),this.el.nativeElement.innerHTML=this.sanitize.sanitize(t.SecurityContext.HTML,this.markedContent)},e.prototype.markedRenderer=function(){this.renderer.listitem=function(e){return/^\s*\[[x ]\]\s*/.test(e)?'<li style="list-style: none;">'+(e=e.replace(/^\s*\[ \]\s*/,'<i class="fa fa-square-o" style="margin: 0 0.2em 0.25em -1.6em;"></i> ').replace(/^\s*\[x\]\s*/,'<i class="fa fa-check-square" style="margin: 0 0.2em 0.25em -1.6em;"></i> '))+"</li>":"<li>"+e+"</li>"},this.renderer.table=function(e,t){return'<table class="table table-bordered">\n<thead>\n'+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.setOptions({highlight:function(e){return n.highlightAuto(e).value},renderer:this.renderer,tables:!0,sanitize:!1,smartLists:!0})},e.decorators=[{type:t.Directive,args:[{selector:"[markdown]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:r.DomSanitizer},{type:t.Renderer2}]},e.propDecorators={markdowntext:[{type:t.Input}],html:[{type:t.Output}]},e}(),c=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[s.CommonModule,a.AngularResizedEventModule],declarations:[l,d],exports:[l,d]}]}],e}();e.YkEditorModule=c,e.YKEditorComponent=l,e.MarkdownDirective=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=yk-editor.umd.min.js.map